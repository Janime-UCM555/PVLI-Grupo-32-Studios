import Coche from '../gameObjects/Coche.js';
import Rampa from '../gameObjects/Rampa.js'
class map extends Phaser.Scene{
    constructor(){
        super({ key:'map'});
    }

    preload()
    {
        this.load.image('car', '../assets/Coche.png')
        this.load.image('ramp', '../assets/Rampa.png')
        this.load.audio('claxon','../assets/claxon.mp3')


        this.load.tilemapTiledJSON('tilemap','../assets/Road.json')
        this.load.image('Ciudad', '../assets/Ciudad.png')
        
    }
    create()
    {
        this.map = this.make.tilemap({
            key:'tilemap',
            tileWidth:16,
            tileHeight:16      
        });
        const tileset = this.map.addTilesetImage('Ciudad', 'Ciudad');
        var carretera = this.map.createLayer('Carretera', tileset);
        var calle = this.map.createLayer('Calle', tileset);
        calle.setCollisionByProperty({collides: true});

        this.ramp = new Rampa(this,250,250,'ramp');
        this.car = new Coche(this,100,100,'car');
        this.car.setScale(0.1);
        this.car.setCollideWorldBounds(true);

        this.physics.add.collider(this.car,calle);
        
        this.claxonSound =  this.sound.add('claxon');
        this.ramp.setScale(0.1);
        //this.physics.add.overlap(this.car,this.ramp, ()  =>  {this.ramp.accelerate(this.car);});
        this.physics.world.createDebugGraphic();
    }
    update()
    {
        this.car.update();
    }
}
export default map;